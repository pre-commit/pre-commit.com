<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="build/main.css">
        <link rel="icon" href="favicon.ico">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>pre-commit</title>
    </head>
    <body class="page-index" data-spy="scroll" data-target=".pc-sidebar">
        <header class="navbar navbar-default pc-nav" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".pc-navbar-collapse">
                        <span class="sr-only">Toggle navigtaion</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="/" class="navbar-brand pc-navbar-brand">
                        <i class="logo"></i>
                    </a>
                </div>
                <nav class="navbar-collapse pc-navbar pc-navbar-collapse collapse" role="navigation">
                    <ul class="nav navbar-nav">
                        <li><a href="/">Documentation</a></li>
                        <li><a href="hooks.html">Supported hooks</a></li>
                        <li><a href="https://github.com/pre-commit/demo-repo#readme">Demo</a></li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="https://github.com/pre-commit/pre-commit" class="btn btn-default">Download on GitHub</a></li>
                    </ul>
                </nav>
            </div>
        </header>
        <div class="top-shelf">
            <div class="container">
                <img class="pc-logo-top-shelf hidden-xs hidden-sm" src="logo-top-shelf.png">
                <h1>
                    <a href="https://github.com/pre-commit/pre-commit">
                        pre-commit
                    </a>
                </h1>
                <p>A framework for managing and maintaining multi-language <span class="nowrap">pre-commit</span> hooks.</p>
           <p><a href="https://travis-ci.org/pre-commit/pre-commit"><img src="https://camo.githubusercontent.com/ea0ef9a42d3a39bf0a55b3f5d7d7a6fa5254bd01/68747470733a2f2f7472617669732d63692e6f72672f7072652d636f6d6d69742f7072652d636f6d6d69742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/pre-commit/pre-commit.svg?branch=master" style="max-width:100%;"></a>
<a href="https://coveralls.io/r/pre-commit/pre-commit"><img src="https://camo.githubusercontent.com/aabc8c9324e9f816adc399bc2b29ca98e781a71e/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f7072652d636f6d6d69742f7072652d636f6d6d69742e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://img.shields.io/coveralls/pre-commit/pre-commit.svg?branch=master" style="max-width:100%;"></a>
<a href="https://ci.appveyor.com/project/asottile/pre-commit/branch/master"><img src="https://ci.appveyor.com/api/projects/status/mmcwdlfgba4esaii/branch/master?svg=true" style="max-width:100%"></a></p>
            <p><iframe src="https://ghbtns.com/github-btn.html?user=pre-commit&amp;repo=pre-commit&amp;type=watch&amp;count=true"
  allowtransparency="true" frameborder="0" scrolling="0" width="104px" height="20"></iframe>
<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://pre-commit.com" data-text="pre-commit - A framework for managing and maintaining multi-language pre-commit hooks.">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>
        </div>
        </div>
        <div class="container pc-main-content">
            

<div class="row">
    <div class="col-sm-3 hidden-xs pc-sidebar">
        <ul class="nav nav-pills nav-stacked pc-sidenav" data-spy="affix" data-offset-top="400">
            <li class="active"><a href="#intro">Introduction</a></li>
            <li><a href="#install">Installation</a></li>
            <li><a href="#plugins">Adding plugins</a></li>
            <li><a href="#usage">Usage</a></li>
            <li><a href="#new-hooks">Creating new hooks</a></li>
            <li><a href="#cli">Command line interface</a></li>
            <li><a href="#advanced">Advanced features</a></li>
            <li><a href="#contributing">Contributing</a></li>
        </ul>
    </div>
    <div class="col-sm-9">
        <div id="intro">
            <div class="page-header"><h1>Introduction</h1></div>
<p>Git hook scripts are useful for identifying simple issues before submission to
code review.  We run our hooks on every commit to automatically point out
issues in code such as missing semicolons, trailing whitespace, and debug
statements.  By pointing these issues out before code review, this allows a
code reviewer to focus on the architecture of a change while not wasting time
with trivial style nitpicks.</p>
<p>As we created more libraries and projects we recognized that sharing our
pre-commit hooks across projects is painful. We copied and pasted unwieldy
bash scripts from project to project and had to manually change the hooks to
work for different project structures.</p>
<p>We believe that you should always use the best industry standard linters.
Some of the best linters are written in languages that you do not use in your
project or have installed on your machine. For example scss-lint is a linter
for SCSS written in Ruby. If you’re writing a project in node you should be
able to use scss-lint as a pre-commit hook without adding a Gemfile to your
project or understanding how to get scss-lint installed.</p>
<p>We built pre-commit to solve our hook issues. It is a multi-language package
manager for pre-commit hooks. You specify a list of hooks you want and
pre-commit manages the installation and execution of any hook written in any
language before every commit. pre-commit is specifically designed to not
require root access. If one of your developers doesn’t have node installed
but modifies a JavaScript file, pre-commit automatically handles downloading
and building node to run eslint without root.</p>


        <div id="install">
            <div class="page-header"><h1>Installation</h1></div>
<p>Before you can run hooks, you need to have the pre-commit package manager
installed.</p>
<p>Using pip:</p>
<div class="highlight"><pre><span></span>pip install pre-commit
</pre></div>
<p>Non Administrative Installation:</p>
<ul>
<li><em>to upgrade: run again, to uninstall: pass <code>uninstall</code> to python</em></li>
<li><em>does not work on platforms without symlink support (windows)</em></li>
</ul>
<div class="highlight"><pre><span></span>curl https://pre-commit.com/install-local.py | python -
</pre></div>
<p>System Level Install:</p>
<div class="highlight"><pre><span></span>curl https://bootstrap.pypa.io/get-pip.py | sudo python - pre-commit
</pre></div>
<p>In a python project, add the following to your requirements.txt (or
requirements-dev.txt):</p>
<div class="highlight"><pre><span></span>pre-commit
</pre></div>
<p>Using <a href="https://brew.sh">homebrew</a>:</p>
<div class="highlight"><pre><span></span>brew install pre-commit
</pre></div>

        </div>

        <div id="plugins">
            <div class="page-header">
                <h1>Adding pre-commit plugins to your project</h1>
            </div>
<p>Once you have pre-commit installed, adding pre-commit plugins to your project
is done with the <code>.pre-commit-config.yaml</code> configuration file.</p>
<p>Add a file called <code>.pre-commit-config.yaml</code> to the root of your project. The
pre-commit config file describes what repositories and hooks are installed.</p>
<h2 id="pre-commit-configyaml---top-level">    .pre-commit-config.yaml - top level <small><a href="#pre-commit-configyaml---top-level">¶</a></small></h2> <p><em>new in 1.0.0</em> The default configuration file top-level was changed from a
list to a map.  If you're using an old version of pre-commit, the top-level
list is the same as the value of <a href="#pre-commit-configyaml---repos"><code>repos</code></a>.
If you'd like to migrate to the new configuration format, run
<a href="#pre-commit-migrate-config"><code>pre-commit migrate-config</code></a> to automatically
migrate your configuration.</p>
<table class="table table-bordered"><tbody><tr><td><p><code>exclude</code></p>
</td><td><p>(optional: default <code>^$</code>) global file exclude pattern.  <em>new in 1.1.0</em>.</p>
</td></tr><tr><td><p><code>fail_fast</code></p>
</td><td><p>(optional: default <code>false</code>) set to <code>true</code> to have pre-commit stop
running hooks after the first failure.  <em>new in 1.1.0</em>.</p>
</td></tr><tr><td><p><code>repos</code></p>
</td><td><p>A list of <a href="#pre-commit-configyaml---repos">repository mappings</a>.</p>
</td></tr></tbody></table><p>A sample top-level with all defaults present:</p>
<div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">exclude</span><span class="p p-Indicator">:</span> <span class="s">&#39;^$&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">fail_fast</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="l l-Scalar l-Scalar-Plain">repos</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
<h2 id="pre-commit-configyaml---repos">    .pre-commit-config.yaml - repos <small><a href="#pre-commit-configyaml---repos">¶</a></small></h2> <p>The repository mapping tells pre-commit where to get the code for the hook
from.</p>
<table class="table table-bordered"><tbody><tr><td><p><code>repo</code></p>
</td><td><p>the repository url to <code>git clone</code> from</p>
</td></tr><tr><td><p><code>sha</code></p>
</td><td><p>the revision or tag to clone at</p>
</td></tr><tr><td><p><code>hooks</code></p>
</td><td><p>A list of <a href="#pre-commit-configyaml---hooks">hook mappings</a>.</p>
</td></tr></tbody></table><p>A sample repository with all defaults present:</p>
<div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">repos</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">repo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/pre-commit/pre-commit-hooks</span>
    <span class="l l-Scalar l-Scalar-Plain">sha</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">v0.9.4</span>
    <span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
<h2 id="pre-commit-configyaml---hooks">    .pre-commit-config.yaml - hooks <small><a href="#pre-commit-configyaml---hooks">¶</a></small></h2> <p>The hook mapping configures which hook from the repository is used and allows
for customization.  All optional keys will receive their default from the
repository's configuration.</p>
<table class="table table-bordered"><tbody><tr><td><p><code>id</code></p>
</td><td><p>which hook from the repository to use.</p>
</td></tr><tr><td><p><code>language_version</code></p>
</td><td><p>(optional) override the language version for the
hook.  See <a href="#overriding-language-version">Overriding Language Version</a>.</p>
</td></tr><tr><td><p><code>files</code></p>
</td><td><p>(optional) override the default pattern for files to run on.</p>
</td></tr><tr><td><p><code>exclude</code></p>
</td><td><p>(optional) file exclude pattern.</p>
</td></tr><tr><td><p><code>types</code></p>
</td><td><p>(optional) override the default file types to run on.  See
<a href="#filtering-files-with-types">Filtering files with types</a>.
<em>new in 0.15.0</em>.</p>
</td></tr><tr><td><p><code>exclude_types</code></p>
</td><td><p>(optional) file types to exclude.  <em>new in 0.15.0</em>.</p>
</td></tr><tr><td><p><code>args</code></p>
</td><td><p>(optional) list of additional parameters to pass to the hook.</p>
</td></tr><tr><td><p><code>stages</code></p>
</td><td><p>(optional) configes the hook to the <code>commit</code>, <code>push</code>, or <code>commit-msg</code>
stage.  See
<a href="#confining-hooks-to-run-at-certain-stages">Confining hooks to run at certain stages</a>.</p>
</td></tr><tr><td><p><code>additional_dependencies</code></p>
</td><td><p>(optional) a list of dependencies that will be installed in the
environment where this hook gets run.  One useful application is to
install plugins for hooks such as <code>eslint</code>.  <em>new in 0.6.6</em>.</p>
</td></tr><tr><td><p><code>always_run</code></p>
</td><td><p>(optional) if <code>true</code>, this hook will run even if there are no matching
files.  <em>new in 0.7.2</em>.</p>
</td></tr></tbody></table><p>One example of a complete configuration:</p>
<div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">repos</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">repo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">git://github.com/pre-commit/pre-commit-hooks</span>
    <span class="l l-Scalar l-Scalar-Plain">sha</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">v0.9.1</span>
    <span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">trailing-whitespace</span>
</pre></div>
<p>This configuration says to download the pre-commit-hooks project and run its
trailing-whitespace hook.</p>
<h2 id="updating-hooks-automatically">    Updating hooks automatically <small><a href="#updating-hooks-automatically">¶</a></small></h2> <p>You can update your hooks to the latest version automatically by running
<code>pre-commit autoupdate</code>.  This will bring the hooks to the latest sha on the
master branch.</p>

        </div>

        <div id="usage">
            <div class="page-header"><h1>Usage</h1></div>
<p>Run <code>pre-commit install</code> to install pre-commit into your git hooks. pre-commit
will now run on every commit. Every time you clone a project using pre-commit
running <code>pre-commit install</code> should always be the first thing you do.</p>
<p>If you want to manually run all pre-commit hooks on a repository, run
<code>pre-commit run --all-files</code>. To run individual hooks use
<code>pre-commit run &lt;hook_id&gt;</code>.</p>
<p>The first time pre-commit runs on a file it will automatically download,
install, and run the hook. Note that running a hook for the first time may be
slow. For example: If the machine does not have node installed, pre-commit
will download and build a copy of node.</p>

        </div>

        <div id="new-hooks">
            <div class="page-header"><h1>Creating new hooks</h1></div>
<p>pre-commit currently supports hooks written in
<a href="#supported-languages">many languages</a>. As long as your git repo is an
installable package (gem, npm, pypi, etc.) or exposes an executable, it can be
used with pre-commit. Each git repo can support as many languages/hooks as you
want.</p>
<p>The hook must exit nonzero on failure or modify files in the working directory
<em>(since 0.6.3)</em>.</p>
<p>A git repo containing pre-commit plugins must contain a .pre-commit-hooks.yaml
file that tells pre-commit:</p>
<table class="table table-bordered"><tbody><tr><td><p><code>id</code></p>
</td><td><p>the id of the hook - used in pre-commit-config.yaml.</p>
</td></tr><tr><td><p><code>name</code></p>
</td><td><p>the name of the hook - shown during hook execution.</p>
</td></tr><tr><td><p><code>entry</code></p>
</td><td><p>the entry point - the executable to run.  <code>entry</code> can also contain
arguments that will not be overridden such as <code>entry: autopep8 -i</code>.</p>
</td></tr><tr><td><p><code>language</code></p>
</td><td><p>the language of the hook - tells pre-commit how to install the hook.</p>
</td></tr><tr><td><p><code>files</code></p>
</td><td><p>(optional: default <code>''</code>) the pattern of files to run on.
<em>new in 0.15.0</em>: now optional.</p>
</td></tr><tr><td><p><code>exclude</code></p>
</td><td><p>(optional: default <code>^$</code>)  exclude files that were matched by <code>files</code>.</p>
</td></tr><tr><td><p><code>types</code></p>
</td><td><p>(optional: default <code>[file]</code>)  list of file types to run on.  See
<a href="#filtering-files-with-types">Filtering files with types</a>.
<em>new in 0.15.0</em>.</p>
</td></tr><tr><td><p><code>exclude_types</code></p>
</td><td><p>(optional: default <code>[]</code>)  exclude files that were matched by <code>types</code>.
<em>new in 0.15.0</em>.</p>
</td></tr><tr><td><p><code>always_run</code></p>
</td><td><p>(optional: default <code>false</code>) if <code>true</code> this hook will run even if there
are no matching files. <em>new in 0.7.2</em>.</p>
</td></tr><tr><td><p><code>pass_filenames</code></p>
</td><td><p>(optional: default <code>true</code>) if <code>true</code> this hook must take filenames as
positional arguments. <em>new in 0.14.0</em>.</p>
</td></tr><tr><td><p><code>description</code></p>
</td><td><p>(optional: default <code>''</code>) description of the hook.  used for metadata
purposes only.</p>
</td></tr><tr><td><p><code>language_version</code></p>
</td><td><p>(optional: default <code>default</code>) see
<a href="#overriding-language-version">Overriding language version</a>.</p>
</td></tr><tr><td><p><code>minimum_pre_commit_version</code></p>
</td><td><p>(optional: default <code>0.0.0</code>) allows one to indicate a minimum
compatible pre-commit version. <em>new in 0.6.7</em>.</p>
</td></tr></tbody></table><p>For example:</p>
<div class="highlight"><pre><span></span><span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">trailing-whitespace</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Trim Trailing Whitespace</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">This hook trims trailing whitespace.</span>
    <span class="l l-Scalar l-Scalar-Plain">entry</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">trailing-whitespace-fixer</span>
    <span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
    <span class="l l-Scalar l-Scalar-Plain">types</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">text</span><span class="p p-Indicator">]</span>
</pre></div>
<p><em>new in 0.12.0</em> Prior to 0.12.0 the file was <code>hooks.yaml</code>
(now <code>.pre-commit-hooks.yaml</code>).  For backwards compatibility it is suggested
to provide both files or suggest users use <code>pre-commit&gt;=0.12.0</code>.</p>
<h2 id="supported-languages">    Supported languages <small><a href="#supported-languages">¶</a></small></h2> <ul>
<li><a href="#docker">docker</a></li>
<li><a href="#docker_image">docker_image</a></li>
<li><a href="#golang">golang</a></li>
<li><a href="#node">node</a></li>
<li><a href="#python">python</a></li>
<li><a href="#ruby">ruby</a></li>
<li><a href="#swift">swift</a></li>
<li><a href="#pcre">pcre</a></li>
<li><a href="#pygrep">pygrep</a></li>
<li><a href="#script">script</a></li>
<li><a href="#system">system</a></li>
</ul>
<h3 id="docker">    docker <small><a href="#docker">¶</a></small></h3> <p><em>new in 0.10.0</em></p>
<p>The hook repository must have a <code>Dockerfile</code>.  It will be installed via
<code>docker build .</code>.</p>
<p>Running Docker hooks requires a running Docker engine on your host.  For
configuring Docker hooks, your <code>entry</code> should correspond to an executable
inside the Docker container, and will be used to override the default container
entrypoint. Your Docker <code>CMD</code> will not run when pre-commit passes a file list
as arguments to the run container  command. Docker allows you to use any
language that's not supported by pre-commit as a builtin.</p>
<p><strong>Support:</strong> docker hooks are known to work on any system which has a working
<code>docker</code> executable.  It has been tested on linux and macOS.  Hooks that are
run via <code>boot2docker</code> are known to be unable to make modifications to files.</p>
<p>See <a href="https://github.com/pre-commit/pre-commit-docker-flake8">this repository</a>
for an example Docker-based hook.</p>
<h3 id="docker_image">    docker_image <small><a href="#docker_image">¶</a></small></h3> <p><em>new in 0.18.0</em></p>
<p>A more lightweight approach to <code>docker</code> hooks.  The <code>docker_image</code>
"language" uses existing docker images to provide hook executables.</p>
<p><code>docker_image</code> hooks can be conviently configured as <a href="#repository-local">local</a>
hooks.</p>
<p>The <code>entry</code> specifies the docker tag to use.  If an image has an
<code>ENTRYPOINT</code> defined, nothing special is needed to hook up the executable.
If the container does not specify an <code>ENTRYPOINT</code> or you want to change the
entrypoint you can specify it as well in your <code>entry</code>.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dockerfile-provides-entrypoint</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">docker_image</span>
    <span class="l l-Scalar l-Scalar-Plain">entry</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my.registry.example.com/docker-image-1:latest</span>
<span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dockerfile-no-entrypoint-1</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">docker_image</span>
    <span class="l l-Scalar l-Scalar-Plain">entry</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">--entrypoint my-exe my.registry.example.com/docker-image-2:latest</span>
<span class="c1"># Alternative equivalent solution</span>
<span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dockerfile-no-entrypoint-2</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">docker_image</span>
    <span class="l l-Scalar l-Scalar-Plain">entry</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my.registry.example.com/docker-image-3:latest my-exe</span>
</pre></div>
<h3 id="golang">    golang <small><a href="#golang">¶</a></small></h3> <p><em>new in 0.12.0</em></p>
<p>The hook repository must contain go source code.  It will be installed via
<code>go get ./...</code>.  pre-commit will create an isolated <code>GOPATH</code> for each hook and
the <code>entry</code> should match an executable which will get installed into the
<code>GOPATH</code>'s <code>bin</code> directory.</p>
<p><strong>Support:</strong> golang hooks are known to work on any system which has go
installed.  It has been tested on linux, macOS, and windows.</p>
<h3 id="node">    node <small><a href="#node">¶</a></small></h3> <p>The hook repository must have a <code>package.json</code>.  It will be installed via
<code>npm install .</code>.  The installed package will provide an executable that will
match the <code>entry</code> – usually through <code>bin</code> in package.json.</p>
<p><strong>Support:</strong> node hooks work without any system-level dependencies.  It has
been tested on linux and macOS and <em>may</em> work under cygwin.</p>
<p><em>new in 1.5.0</em> windows is now supported for node hooks.  Currently python3
only due to <a href="https://bugs.python.org/issue32539">a bug in cpython</a>.</p>
<h3 id="python">    python <small><a href="#python">¶</a></small></h3> <p>The hook repository must have a <code>setup.py</code>.  It will be installed via
<code>pip install .</code>.  The installed package will provide an executable that will
match the <code>entry</code> – usually through <code>console_scripts</code> or <code>scripts</code> in setup.py.</p>
<p><strong>Support:</strong> python hooks work without any system-level depedendencies.  It
has been tested on linux, macOS, windows, and cygwin.</p>
<h3 id="ruby">    ruby <small><a href="#ruby">¶</a></small></h3> <p>The hook repository must have a <code>*.gemspec</code>.  It will be installed via
<code>gem build *.gemspec &amp;&amp; gem install *.gem</code>.  The installed package will
produce an executable that will match the <code>entry</code> – usually through
<code>exectuables</code> in your gemspec.</p>
<p><strong>Support:</strong> ruby hooks work without any system-level dependencies.  It has
been tested on linux and macOS and <em>may</em> work under cygwin.</p>
<h3 id="swift">    swift <small><a href="#swift">¶</a></small></h3> <p><em>new in 0.11.0</em></p>
<p>The hook repository must have a <code>Package.swift</code>.  It will be installed via
<code>swift build -c release</code>.  The <code>entry</code> should match an executable created by
building the repository.</p>
<p><strong>Support:</strong> swift hooks are known to work on any system which has swift
installed.  It has been tested on linux and macOS.</p>
<h3 id="pcre">    pcre <small><a href="#pcre">¶</a></small></h3> <p><em><strong>deprecated</strong></em>: the pcre language will be removed in a later version.  Use
<a href="#pygrep">pygrep</a> hooks instead (usually a drop-in replacement).</p>
<p>"Perl Compatible Regular Expressions" – pcre hooks are a quick way to write a
simple hook which prevents commits by file matching.  Specify the regex as the
<code>entry</code>.</p>
<p>macos does not ship with a functioning <code>grep -P</code> so you'll need
<code>brew install grep</code> for pcre hooks to function.</p>
<p><strong>Support:</strong> pcre hooks work on any system which has a functioning
<code>grep -P</code> (or in the case of macOS: <code>ggrep -P</code>).  It has been tested on linux,
macOS, windows, and cygwin.</p>
<h3 id="pygrep">    pygrep <small><a href="#pygrep">¶</a></small></h3> <p><em>new in 1.2.0</em></p>
<p>A cross-platform python implementation of <code>grep</code> – pygrep hooks are a quick
way to write a simple hook which prevents commits by file matching.  Specify
the regex as the <code>entry</code>.  The <code>entry</code> may be any python
<a href="#regular-expressions">regular expression</a>.  For case insensitive regexes you
can apply the <code>(?i)</code> flag as the start of your entry, or use <code>args: [-i]</code>.</p>
<p><strong>Support:</strong> pygrep hooks are supported on all platforms which pre-commit runs
on.</p>
<h3 id="script">    script <small><a href="#script">¶</a></small></h3> <p>Script hooks provide a way to write simple scripts which validate files. The
<code>entry</code> should be a path relative to the root of the hook repository.</p>
<p>This hook type will not be given a virtual environment to work with – if it
needs additional dependencies the consumer must install them manually.</p>
<p><strong>Support:</strong> the support of script hooks depend on the scripts themselves.</p>
<h3 id="system">    system <small><a href="#system">¶</a></small></h3> <p>System hooks provide a way to write hooks for system-level executables which
don't have a supported language above (or have special environment
requirements that don't allow them to run in isolation such as pylint).</p>
<p>This hook type will not be given a virtual environment to work with – if it
needs additional dependencies the consumer must install them manually.</p>
<p><strong>Support:</strong> the support of system hooks depend on the executables.</p>
<h2 id="developing-hooks-interactively">    Developing hooks interactively <small><a href="#developing-hooks-interactively">¶</a></small></h2> <p>Since the <code>repo</code> property of <code>.pre-commit-config.yaml</code> can refer to anything
that <code>git clone ...</code> understands, it's often useful to point it at a local
directory while developing hooks.</p>
<p><a href="#pre-commit-try-repo"><code>pre-commit try-repo</code></a> streamlines this process by
enabling a quick way to try out a repository.  Here's how one might work
interactively:</p>
<div class="highlight"><pre><span></span><span class="go">~/work/hook-repo $ git checkout origin/master -b feature</span>

<span class="gp">#</span> ... make some changes

<span class="go">~/work/hook-repo $ # A commit is needed so `pre-commit` can clone</span>
<span class="go">~/work/hook-repo $ git commit -m &quot;Add new hook: foo&quot;</span>

<span class="gp">#</span> In another terminal or tab

<span class="go">~/work/other-repo $ pre-commit try-repo ../hook-repo foo --verbose --all-files</span>
<span class="go">===============================================================================</span>
<span class="go">Using config:</span>
<span class="go">===============================================================================</span>
<span class="go">repos:</span>
<span class="go">-   repo: ../hook-repo</span>
<span class="go">    sha: 84f01ac09fcd8610824f9626a590b83cfae9bcbd</span>
<span class="go">    hooks:</span>
<span class="go">    -   id: foo</span>
<span class="go">===============================================================================</span>
<span class="go">[INFO] Initializing environment for ../hook-repo.</span>
<span class="go">[foo] Foo................................................................Passed</span>
<span class="go">hookid: foo</span>

<span class="go">Hello from foo hook!</span>
</pre></div>

        </div>

        <div id="cli">
            <div class="page-header"><h1>Command line interface</h1></div>

<p>All pre-commit commands take the following options:</p>
<ul>
<li><code>--color {auto,always,never}</code>: whether to use color in output.
Defaults to <code>auto</code>.</li>
<li><code>-c CONFIG</code>, <code>--config CONFIG</code>: path to alternate config file</li>
<li><code>-h</code>, <code>--help</code>: show help and available options.</li>
</ul>
<h2 id="pre-commit-autoupdate">    pre-commit autoupdate [options] <a href="#pre-commit-autoupdate"></a> <small><a href="#pre-commit-autoupdate">¶</a></small></h2> <p>Auto-update pre-commit config to the latest repos' versions.</p>
<p>Options:</p>
<ul>
<li><code>--bleeding-edge</code>: update to the bleeding edge of <code>master</code> instead of the
latest tagged version (the default behaviour).</li>
<li><code>--repo REPO</code>: <em>new in 1.4.1</em> Only update this repository.</li>
</ul>
<h2 id="pre-commit-clean">    pre-commit clean [options] <a href="#pre-commit-clean"></a> <small><a href="#pre-commit-clean">¶</a></small></h2> <p>Clean out cached pre-commit files.</p>
<p>Options: (no additional options)</p>
<h2 id="pre-commit-install">    pre-commit install [options] <a href="#pre-commit-install"></a> <small><a href="#pre-commit-install">¶</a></small></h2> <p>Install the pre-commit script.</p>
<p>Options:</p>
<ul>
<li><code>-f</code>, <code>--overwrite</code>: overwrite existing hooks / remove migration mode.</li>
<li><code>--install-hooks</code>: also install hook environments for all available hooks.</li>
<li><code>-t {pre-commit,pre-push,commit-msg}</code>,
<code>--hook-type {pre-commit,pre-push,commit-msg}</code>: which hook type to install.</li>
<li><code>--allow-missing-config</code>: whether to allow the installed hook scripts to
permit a missing configuration file.</li>
</ul>
<p>Some example useful invocations:</p>
<ul>
<li><code>pre-commit install</code>: default install invocation will run existing hook
scripts alongside pre-commit.</li>
<li><code>pre-commit install -f --install-hooks</code>: idempotently replace git hook
scripts with pre-commit and also install hooks.</li>
</ul>
<h2 id="pre-commit-install-hooks">    pre-commit install-hooks [options] <a href="#pre-commit-install-hooks"></a> <small><a href="#pre-commit-install-hooks">¶</a></small></h2> <p>Install hook environments for all environments in the config file.  You may
find <code>pre-commit install --install-hooks</code> more useful.</p>
<p>Options: (no additional options)</p>
<h2 id="pre-commit-migrate-config">    pre-commit migrate-config [options] <a href="#pre-commit-migrate-config"></a> <small><a href="#pre-commit-migrate-config">¶</a></small></h2> <p><em>new in 1.0.0</em> Migrate list configuration to the new map configuration format.</p>
<p>Options: (no additional options)</p>
<h2 id="pre-commit-run">    pre-commit run [hook-id] [options] <a href="#pre-commit-run"></a> <small><a href="#pre-commit-run">¶</a></small></h2> <p>Run hooks.</p>
<p>Options:</p>
<ul>
<li><code>[hook-id]</code>: specify a single hook-id to run only that hook.</li>
<li><code>-a</code>, <code>--all-files</code>: run on all the files in the repo.</li>
<li><code>--files [FILES [FILES ...]]</code>: specific filenames to run hooks on.</li>
<li><code>--source SOURCE</code> + <code>--origin ORIGIN</code>: run against the files changed between
<code>SOURCE...ORIGIN</code> in git.</li>
<li><code>--show-diff-on-failure</code>: <em>new in 0.13.4</em> when hooks fail, run <code>git diff</code>
directly afterward.</li>
<li><code>-v</code>, <code>--verbose</code>: produce hook output independent of success.  Include hook
ids in output.</li>
</ul>
<p>Some example useful invocations:</p>
<ul>
<li><code>pre-commit run</code>: this is what pre-commit runs by default when committing.
This will run all hooks against currently staged files.</li>
<li><code>pre-commit run --all-files</code>: run all the hooks against all the files.  This
is a useful invocation if you are using pre-commit in CI.</li>
<li><code>pre-commit run flake8</code>: run the <code>flake8</code> hook against all staged files.</li>
<li><code>git ls-files -- '*.py' | xargs pre-commit run --files</code>: run all hooks
against all <code>*.py</code> files in the repository.</li>
<li><code>pre-commit run --source HEAD^^^ --origin HEAD</code>: run against the files that
have changed between <code>HEAD^^^</code> and <code>HEAD</code>.  This form is useful when
leveraged in a pre-receive hook.</li>
</ul>
<h2 id="pre-commit-sample-config">    pre-commit sample-config [options] <a href="#pre-commit-sample-config"></a> <small><a href="#pre-commit-sample-config">¶</a></small></h2> <p>Produce a sample <code>.pre-commit-config.yaml</code>.</p>
<p>Options: (no additional options)</p>
<h2 id="pre-commit-try-repo">    pre-commit try-repo REPO [options] <a href="#pre-commit-try-repo"></a> <small><a href="#pre-commit-try-repo">¶</a></small></h2> <p><em>new in 1.3.0</em> Try the hooks in a repository, useful for developing new hooks.
<code>try-repo</code> can also be used for testing out a repository before adding it to
your configuration.  <code>try-repo</code> prints a configuration it generates based on
the remote hook repository before running the hooks.</p>
<p>Options:</p>
<ul>
<li><code>REPO</code>: required clonable hooks repository.  Can be a local path on
disk.</li>
<li><code>--ref REF</code>: Manually select a ref to run against, otherwise the <code>HEAD</code>
revision will be used.</li>
<li><code>pre-commit try-repo</code> also supports all available options for
<a href="#pre-commit-run"><code>pre-commit run</code></a>.</li>
</ul>
<p>Some example useful invocations:</p>
<ul>
<li><code>pre-commit try-repo git://github.com/pre-commit/pre-commit-hooks</code>: runs all
the hooks in the latest revision of <code>pre-commit/pre-commit-hooks</code>.</li>
<li><code>pre-commit try-repo ../path/to/repo</code>: run all the hooks in a repository on
disk.</li>
<li><code>pre-commit try-repo ../pre-commit-hooks flake8</code>: run only the <code>flake8</code> hook
configured in a local <code>../pre-commit-hooks</code> repository.</li>
<li>See <a href="#pre-commit-run"><code>pre-commit run</code></a> for more useful <code>run</code> invocations
which are also supported by <code>pre-commit try-repo</code>.</li>
</ul>
<h2 id="pre-commit-uninstall">    pre-commit uninstall [options] <a href="#pre-commit-uninstall"></a> <small><a href="#pre-commit-uninstall">¶</a></small></h2> <p>Uninstall the pre-commit script.</p>
<p>Options:</p>
<ul>
<li><code>-t {pre-commit,pre-push,commit-msg}</code>,
<code>--hook-type {pre-commit,pre-push,commit-msg}</code>: which hook type to uninstall.</li>
</ul>

        </div>

        <div id="advanced">
            <div class="page-header"><h1>Advanced features</h1></div>

<h2 id="running-in-migration-mode">    Running in migration mode <small><a href="#running-in-migration-mode">¶</a></small></h2> <p>By default, if you have existing hooks <code>pre-commit install</code> will install in a
migration mode which runs both your existing hooks and hooks for pre-commit.
To disable this behavior, simply pass <code>-f</code> / <code>--overwrite</code> to the <code>install</code>
command. If you decide not to use pre-commit, <code>pre-commit uninstall</code> will
restore your hooks to the state prior to installation.</p>
<h2 id="temporarily-disabling-hooks">    Temporarily disabling hooks <small><a href="#temporarily-disabling-hooks">¶</a></small></h2> <p>Not all hooks are perfect so sometimes you may need to skip execution of one
or more hooks. pre-commit solves this by querying a <code>SKIP</code> environment
variable. The <code>SKIP</code> environment variable is a comma separated list of hook
ids. This allows you to skip a single hook instead of <code>--no-verify</code>ing the
entire commit.</p>
<div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">SKIP</span><span class="o">=</span>flake8 git commit -m <span class="s2">&quot;foo&quot;</span>
</pre></div>
<h2 id="pre-commit-during-commits">    pre-commit during commits <small><a href="#pre-commit-during-commits">¶</a></small></h2> <p>Running hooks on unstaged changes can lead to both false-positives and
false-negatives during committing.  pre-commit only runs on the staged
contents of files by temporarily saving the contents of your files at commit
time and stashing the unstaged changes while running hooks.</p>
<h2 id="pre-commit-during-merges">    pre-commit during merges <small><a href="#pre-commit-during-merges">¶</a></small></h2> <p>The biggest gripe we’ve had in the past with pre-commit  hooks was during
merge conflict resolution.  When working on very large projects a merge often
results in hundreds of committed files. I shouldn’t need to run hooks on all
of these files that I didn’t even touch!  This often led to running commit
with <code>--no-verify</code> and allowed introduction of real bugs that hooks could have
caught.</p>
<p>pre-commit solves this by only running hooks on files that conflict or were
manually edited during conflict resolution.  This also includes files which
were automatically merged by git.  Git isn't perfect and this can often catch
implicit conflicts (such as with removed python imports).</p>
<h2 id="pre-commit-during-push">    pre-commit during push <small><a href="#pre-commit-during-push">¶</a></small></h2> <p><em>new in 0.3.5</em> pre-commit can be used to manage <code>pre-push</code> hooks.  Simply
<code>pre-commit install --hook-type pre-push</code>.</p>
<h2 id="pre-commit-for-commit-messages">    pre-commit for commit messages <small><a href="#pre-commit-for-commit-messages">¶</a></small></h2> <p><em>new in 0.15.4</em> pre-commit can be used to manage <code>commit-msg</code> hooks.  Simply
<code>pre-commit install --hook-type commit-msg</code>.</p>
<p><code>commit-msg</code> hooks can be configured by setting <code>stages: [commit-msg]</code>.
<code>commit-msg</code> hooks will be passed a single filename -- this file contains the
current contents of the commit message which can be validated.  If a hook
exits nonzero, the commit will be aborted.</p>
<h2 id="confining-hooks-to-run-at-certain-stages">    Confining hooks to run at certain stages <small><a href="#confining-hooks-to-run-at-certain-stages">¶</a></small></h2> <p>If pre-commit during push has been installed, then all hooks (by default) will
be run during the <code>push</code> stage.  Hooks can however be confined to a stage by
setting the <code>stages</code> property in your <code>.pre-commit-config.yaml</code>.  The
<code>stages</code> property is an array and can contain any of <code>commit</code>, <code>push</code>, and
<code>commit-msg</code>.</p>
<h2 id="passing-arguments-to-hooks">    Passing arguments to hooks <small><a href="#passing-arguments-to-hooks">¶</a></small></h2> <p>Sometimes hooks require arguments to run correctly. You can pass static
arguments by specifying the <code>args</code> property in your <code>.pre-commit-config.yaml</code>
as follows:</p>
<div class="highlight"><pre><span></span><span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">repo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">git://github.com/pre-commit/pre-commit-hooks</span>
    <span class="l l-Scalar l-Scalar-Plain">sha</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">v0.9.1</span>
    <span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">flake8</span>
        <span class="l l-Scalar l-Scalar-Plain">args</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">--max-line-length=131</span><span class="p p-Indicator">]</span>
</pre></div>
<p>This will pass <code>--max-line-length=131</code> to <code>flake8</code>.</p>
<h3 id="arguments-pattern-in-hooks">    Arguments pattern in hooks <small><a href="#arguments-pattern-in-hooks">¶</a></small></h3> <p>If you are writing your own custom hook, your hook should expect to receive
the <code>args</code> value and then a list of staged files.</p>
<p>For example, assuming a <code>.pre-commit-config.yaml</code>:</p>
<div class="highlight"><pre><span></span><span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">repo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">git://github.com/path/to/your/hook/repo</span>
    <span class="l l-Scalar l-Scalar-Plain">sha</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">badf00ddeadbeef</span>
    <span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my-hook-script-id</span>
        <span class="l l-Scalar l-Scalar-Plain">args</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">--myarg1=1</span><span class="p p-Indicator">,</span> <span class="nv">--myarg1=2</span><span class="p p-Indicator">]</span>
</pre></div>
<p>When you next run <code>pre-commit</code>, your script will be called:</p>
<div class="highlight"><pre><span></span>path/to/script-or-system-exe --myarg1=1 --myarg1=2 dir/file1 dir/file2 file3
</pre></div>
<p>If the <code>args</code> property is empty or not defined, your script will be called:</p>
<div class="highlight"><pre><span></span>path/to/script-or-system-exe dir/file1 dir/file2 file3
</pre></div>
<h2 id="repository-local-hooks">    Repository local hooks <small><a href="#repository-local-hooks">¶</a></small></h2> <p>Repository-local hooks are useful when:</p>
<ul>
<li>The scripts are tightly coupled to the repository and it makes sense to
distribute the hook scripts with the repository.</li>
<li>Hooks require state that is only present in a built artifact of your
repository (such as your app's virtualenv for pylint).</li>
<li>The official repository for a linter doesn't have the pre-commit metadata.</li>
</ul>
<p>You can configure repository-local hooks by specifying the <code>repo</code> as the
sentinel <code>local</code>.</p>
<p><em>new in 0.13.0</em> repository hooks can use any language which supports
<code>additional_dependencies</code> or <code>docker_image</code> / <code>pcre</code> / <code>pygrep</code> / <code>script</code> /
<code>system</code>.
This enables you to install things which previously would require a trivial
mirror repository.</p>
<p>A <code>local</code> hook must define <code>id</code>, <code>name</code>, <code>language</code>, <code>entry</code>, and <code>files</code> /
<code>types</code> as specified under <a href="#new-hooks">Creating new hooks</a>.</p>
<p>Here's an example configuration with a few <code>local</code> hooks:</p>
<div class="highlight"><pre><span></span><span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">repo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">local</span>
    <span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pylint</span>
        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pylint</span>
        <span class="l l-Scalar l-Scalar-Plain">entry</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">python -m pylint.__main__</span>
        <span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">system</span>
        <span class="l l-Scalar l-Scalar-Plain">types</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">python</span><span class="p p-Indicator">]</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">check-x</span>
        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Check X</span>
        <span class="l l-Scalar l-Scalar-Plain">entry</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">./bin/check-x.sh</span>
        <span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">script</span>
        <span class="l l-Scalar l-Scalar-Plain">files</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">\.x$</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">scss-lint</span>
        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">scss-lint</span>
        <span class="l l-Scalar l-Scalar-Plain">entry</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">scss-lint</span>
        <span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ruby</span>
        <span class="l l-Scalar l-Scalar-Plain">language_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2.1.5</span>
        <span class="l l-Scalar l-Scalar-Plain">types</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">scss</span><span class="p p-Indicator">]</span>
        <span class="l l-Scalar l-Scalar-Plain">additional_dependencies</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;scss_lint:0.52.0&#39;</span><span class="p p-Indicator">]</span>
</pre></div>
<h2 id="filtering-files-with-types">    Filtering files with types <small><a href="#filtering-files-with-types">¶</a></small></h2> <p><em>new in 0.15.0</em></p>
<p>Filtering with <code>types</code> provides several advantages over traditional filtering
with <code>files</code>.</p>
<ul>
<li>no error-prone regular expressions</li>
<li>files can be matched by their shebang (even when extensionless)</li>
<li>symlinks / submodules can be easily ignored</li>
</ul>
<p><code>types</code> is specified per hook as an array of tags.  The tags are discovered
through a set of heuristics by the
<a href="https://github.com/chriskuehl/identify">identify</a> library.  <code>identify</code> was
chosen as it is a small portable pure python library.</p>
<p>Some of the common tags you'll find from identify:</p>
<ul>
<li><code>file</code></li>
<li><code>symlink</code></li>
<li><code>directory</code> - in the context of pre-commit this will be a submodule</li>
<li><code>executable</code> - whether the file has the executable bit set</li>
<li><code>text</code> - whether the file looks like a text file</li>
<li><code>binary</code> - whether the file looks like a binary file</li>
<li><a href="https://github.com/chriskuehl/identify/blob/master/identify/extensions.py">tags by extension / naming convention</a></li>
<li><a href="https://github.com/chriskuehl/identify/blob/master/identify/interpreters.py">tags by shebang (<code>#!</code>)</a></li>
</ul>
<p>To discovery the type of any file on disk, you can use <code>identify</code>'s cli:</p>
<div class="highlight"><pre><span></span><span class="gp">$</span> identify-cli setup.py
<span class="go">[&quot;file&quot;, &quot;non-executable&quot;, &quot;python&quot;, &quot;text&quot;]</span>
<span class="gp">$</span> identify-cli some-random-file
<span class="go">[&quot;file&quot;, &quot;non-executable&quot;, &quot;text&quot;]</span>
<span class="gp">$</span> identify-cli --filename-only some-random-file<span class="p">;</span> <span class="nb">echo</span> <span class="nv">$?</span>
<span class="go">1</span>
</pre></div>
<p>If a file extension you use is not supported, please
<a href="https://github.com/chriskuehl/identify">submit a pull request</a>!</p>
<p><code>types</code> and <code>files</code> are evaluated with <code>AND</code> when filtering.  Tags within
<code>types</code> are also evaluated using <code>AND</code>.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span>    <span class="l l-Scalar l-Scalar-Plain">files</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">^foo/</span>
    <span class="l l-Scalar l-Scalar-Plain">types</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">file</span><span class="p p-Indicator">,</span> <span class="nv">python</span><span class="p p-Indicator">]</span>
</pre></div>
<p>will match a file <code>foo/1.py</code> but will not match <code>setup.py</code>.</p>
<p>Files can also be matched by shebang.  With <code>types: python</code>, an <code>exe</code> starting
with <code>#!/usr/bin/env python3</code> will also be matched.</p>
<p>As with <code>files</code> and <code>exclude</code>, you can also exclude types if necessary using
<code>exclude_types</code>.</p>
<p>If you'd like to use <code>types</code> with compatibility for older versions
<a href="https://github.com/pre-commit/pre-commit/pull/551#issuecomment-312535540">here is a guide to ensuring compatibility</a>.</p>
<h2 id="regular-expressions">    Regular expressions <small><a href="#regular-expressions">¶</a></small></h2> <p>The patterns for <code>files</code> and <code>exclude</code> are python
<a href="https://docs.python.org/3/library/re.html#regular-expression-syntax">regular expressions</a>.</p>
<p>As such, you can use any of the features that python regexes support.</p>
<p>If you find that your regular expression is becoming unwieldy due to a long
list of excluded / included things, you may find a
<a href="https://docs.python.org/3/library/re.html#re.VERBOSE">verbose</a> regular
expression useful.  One can enable this with yaml's  multiline literals and
the <code>(?x)</code> regex flag.</p>
<div class="highlight"><pre><span></span><span class="c1"># ...</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my-hook</span>
        <span class="l l-Scalar l-Scalar-Plain">exclude</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">&gt;</span>
            <span class="no">(?x)^(</span>
                <span class="no">path/to/file1.py|</span>
                <span class="no">path/to/file2.py|</span>
                <span class="no">path/to/file3.py</span>
            <span class="no">)$</span>
</pre></div>
<h2 id="overriding-language-version">    Overriding language version <small><a href="#overriding-language-version">¶</a></small></h2> <p>Sometimes you only want to run the hooks on a specific version of the
language. For each language, they default to using the system installed
language (So for example if I’m running <code>python2.7</code> and a hook specifies
<code>python</code>, pre-commit will run the hook using <code>python2.7</code>). Sometimes you
don’t want the default system installed version so you can override this on a
per-hook basis by setting the <code>language_version</code>.</p>
<div class="highlight"><pre><span></span><span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">repo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">git://github.com/pre-commit/mirrors-scss-lint</span>
    <span class="l l-Scalar l-Scalar-Plain">sha</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">v0.54.0</span>
    <span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span>   <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">scss-lint</span>
        <span class="l l-Scalar l-Scalar-Plain">language_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2.1.5</span>
</pre></div>
<p>This tells pre-commit to use ruby <code>2.1.5</code> to run the <code>scss-lint</code> hook.</p>
<p>Valid values for specific languages are listed below:</p>
<ul>
<li>python: Whatever system installed python interpreters you have. The value of
this argument is passed as the <code>-p</code> to <code>virtualenv</code>.<ul>
<li><em>new in 1.4.3</em>: on windows the
<a href="https://www.python.org/dev/peps/pep-0394/">pep394</a> name will be
translated into a py launcher call for portability.  So continue to use
names like <code>python3</code> (<code>py -3</code>) or <code>python3.6</code> (<code>py -3.6</code>) even on
windows.</li>
</ul>
</li>
<li>node: See <a href="https://github.com/ekalinin/nodeenv#advanced">nodeenv</a>.</li>
<li>ruby: See <a href="https://github.com/sstephenson/ruby-build/tree/master/share/ruby-build">ruby-build</a>.</li>
</ul>
<h2 id="usage-in-continuous-integration">    Usage in continuous integration <small><a href="#usage-in-continuous-integration">¶</a></small></h2> <p>pre-commit can also be used as a tool for continuous integration.  For
instance, adding <code>pre-commit run --all-files</code> as a CI step will ensure
everything stays in tip-top shape.  To check only files which have changed,
which may be faster, use something like
<code>git diff-tree --no-commit-id --name-only -r $REVISION | xargs pre-commit run --files</code>.</p>
<h2 id="usage-with-tox">    Usage with tox <small><a href="#usage-with-tox">¶</a></small></h2> <p><a href="https://tox.readthedocs.io/">tox</a> is useful for configuring test / CI tools
such as pre-commit.  One feature of <code>tox&gt;=2</code> is it will clear environment
variables such that tests are more reproducible.  Under some conditions,
pre-commit requires a few environment variables and so they must be
whitelisted.</p>
<p>When cloning repos over ssh (<code>repo: git@github.com:...</code>), <code>git</code> requires the
<code>SSH_AUTH_SOCK</code> variable and will otherwise fail:</p>
<div class="highlight"><pre><span></span>[INFO] Initializing environment for git@github.com:pre-commit/pre-commit-hooks.
An unexpected error has occurred: CalledProcessError: Command: (&#39;/usr/bin/git&#39;, &#39;clone&#39;, &#39;--no-checkout&#39;, &#39;git@github.com:pre-commit/pre-commit-hooks&#39;, &#39;/home/asottile/.cache/pre-commit/repofdkwkq_v&#39;)
Return code: 128
Expected return code: 0
Output: (none)
Errors:
    Cloning into &#39;/home/asottile/.cache/pre-commit/repofdkwkq_v&#39;...
    Permission denied (publickey).
    fatal: Could not read from remote repository.

    Please make sure you have the correct access rights
    and the repository exists.


Check the log at /home/asottile/.cache/pre-commit/pre-commit.log
</pre></div>
<p>Add the following to your tox testenv:</p>
<div class="highlight"><pre><span></span><span class="k">[testenv]</span>
<span class="na">passenv</span> <span class="o">=</span> <span class="s">SSH_AUTH_SOCK</span>
</pre></div>
<p>pre-commit uses <code>os.path.expanduser</code> to create the cache directory, on windows
this requires the <code>HOMEPATH</code> environment variable:</p>
<div class="highlight"><pre><span></span><span class="k">[testenv]</span>
<span class="na">passenv</span> <span class="o">=</span> <span class="s">HOMEPATH</span>
</pre></div>
<p>Or with both:</p>
<div class="highlight"><pre><span></span><span class="k">[testenv]</span>
<span class="na">passenv</span> <span class="o">=</span> <span class="s">HOMEPATH SSH_AUTH_SOCK</span>
</pre></div>
<h2 id="using-the-latest-sha-for-a-repository">    Using the latest sha for a repository <small><a href="#using-the-latest-sha-for-a-repository">¶</a></small></h2> <p><code>pre-commit</code> configuration aims to give a repeatable and fast experience and
therefore intentionally doesn't provide facilities for "unpinned latest
version" for hook repositories.</p>
<p>Instead, <code>pre-commit</code> provides tools to make it easy to upgrade to the
latest versions with <a href="#pre-commit-autoupdate"><code>pre-commit autoupdate</code></a>.  If
you need the absolute latest version of a hook (instead of the latest tagged
version), pass the <code>--bleeding-edge</code> parameter to <code>autoupdate</code>.</p>
<p><code>pre-commit</code> assumes that the value of <code>sha</code> is an immutable ref (such as a
tag or SHA) and will cache based on that.  Using a branch name (or <code>HEAD</code>) for
the value of <code>sha</code> is not supported and will only represent the state of
that mutable ref at the time of hook installation (and will <em>NOT</em> update
automatically).</p>

        </div>

        <div id="contributing">
            <div class="page-header"><h1>Contributing</h1></div>

<p>We’re looking to grow the project and get more contributors especially to
support more languages/versions. We’d also like to get the
.pre-commit-hooks.yaml files added to popular linters without maintaining
forks / mirrors.</p>
<p>Feel free to submit Bug Reports, Pull Requests, and Feature Requests.</p>
<h2 id="contributors">    Contributors <small><a href="#contributors">¶</a></small></h2> <ul>
<li>website by <a href="https://github.com/mfnkl">Molly Finkle</a></li>
<li>created by <a href="https://github.com/asottile">Anthony Sottile</a></li>
<li>core developers: <a href="https://github.com/struys">Ken Struys</a>,
<a href="https://github.com/chriskuehl">Chris Kuehl</a></li>
<li><a href="https://github.com/pre-commit/pre-commit/graphs/contributors">framework contributors</a></li>
<li><a href="https://github.com/pre-commit/pre-commit-hooks/graphs/contributors">core hook contributors</a></li>
<li>and users like you!</li>
</ul>

        </div>
    </div>
</div>

        </div>
        <footer class="pc-footer"><div class="container"></div></footer>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="node_modules/bootstrap-sass/assets/javascripts/bootstrap.min.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-104682927-1', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>
